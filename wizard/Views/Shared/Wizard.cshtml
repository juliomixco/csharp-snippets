
<div ng-cloak>
    <div class="row" ng-init="InfoClient()">
        <div class="col-lg-12">
            <div class="hpanel">
                <div class="panel-heading" style="background-color:#1b75bb; color:#ffffff; font-size:18px; padding-left:20px">
                    <div panel-tools></div>
                    <p ng-bind-html="title"></p>
                </div>
                <div class="panel-withoutborder-body">
                    <div class="text-center m-b-md">
                        <span class="btn" ng-class="{ 'btn-sqrely-sky': step == 1, 'btn-sqrely-default': step != 1}" style="font-size:14px">Wellcome</span>
                        <span class="btn" ng-class="{ 'btn-sqrely-sky': step == 2, 'btn-sqrely-default': step != 2}"style="font-size:14px">Step 1 - Company Info</span>
                        <span class="btn" ng-class="{ 'btn-sqrely-sky': step == 3, 'btn-sqrely-default': step != 3}" style="font-size:14px">Step 2 - Settings</span>
                        <span class="btn" ng-class="{ 'btn-sqrely-sky': step == 4, 'btn-sqrely-default': step != 4}"style="font-size:14px">Step 3 - Users</span>
                        <span class="btn" ng-class="{ 'btn-sqrely-sky': step == 5, 'btn-sqrely-default': step != 5}"style="font-size:14px">Finish</span>
                    </div>
                    <div ng-show="step == 1" style="border-top: 1px solid #e4e5e7;">
                        <div class="hpanel">
                            <div class="panel-withoutborder-body text-center" >
                               <span style="font-size:20px; color:#1b75bb">¡Welcome to the Sqrely family!</span><br />
                               <span style="font-size:20px">{{config.tenantconfigs[0].parameter}}</span><br /><br /><br />
                               <span style="font-size:16px">Thank you for choosing Sqrely Sales Order Management We are eager to get your started. <br /> Please follow these steps to setup your settings and upload your data.</span>
                            </div>
                        </div>
                        
                        <div class="text-right m-t-xs">
                            @*<button ng-click="EndWizard()" class="btn btn-sqrely-primary" ng-show="flagskip > 1" style="font-size:14px">Skip Wizard</button>*@
                            <button ng-click="wizard.next()" class="btn btn-sqrely-primary" style="font-size:14px">Next</button>
                        </div>
                        @*<div class="checkbox text-left m-t-xs">
                            <input icheck type="checkbox" ng-model="config.tenantconfigs[9].parameter">
                            Show Wizard allways
                        </div>*@
                        </div>

                    <div ng-show="step == 2" class="p-m" style="border-top: 1px solid #e4e5e7;border-bottom: 1px solid #e4e5e7;">
                        <form name="formstep2" novalidate id="simpleForm2">
                            <div class="row">
                                <div class="col-lg-3 col-md-3 col-xs-12 text-center text-center">
                                        <div class="form-group col-lg-12 col-md-12 col-xs-12">
                                            <label>Default Company Logo</label>
                                            @*<span ng-bind-html="selectedImage"></span>*@
                                            <img ng-src="{{selectedImage}}" src="~/Content/img/sqrelyLog.png" class="img-responsive"/>
                                            <div class="fileUpload btn btn-sqrely-primary">
                                                <span>Upload Image</span>
                                                <input type="file" ng-model="file" class="upload bordercontrol-colorprimary sqrely-placeholder1" name="file" base-sixty-four-input maxsize="1000" accept="image/*" ng-change="cargarimage()" />
                                                
                                            </div><br />
                                            <span class="error" ng-show="!formstep2.file.$valid" style="color:#e74c3c">Max file size is 1MB</span>
                                        </div>
                                </div>
                                <div class="col-lg-9 col-md-9 col-xs-12" style="border-left: 1px solid #DCDCDC;">
                                    <div>
                                    <div class="row">
                                            <div class="form-group col-lg-6 col-xs-12 col-md-6" ng-class="{'has-error': (formstep2.$submitted || formstep2.Companyname.$touched) && formstep2.Companyname.$invalid} ">
                                            <label>Company Name</label><br />
                                                <input type="text" value="" id="" class="form-control bordercontrol-colorprimary sqrely-placeholder1" ng-model="config.tenantconfigs[0].parameter" placeholder="My Company" name="Companyname" required onfocus="this.placeholder = ''" onblur="this.placeholder = 'My Company'" style="display:inline-block;width:95%" />
                                                <div class="font-icon-detail validacioninput">
                                                <span>*</span>
                                            </div>
                                        </div>

                                            <div class="form-group col-lg-6 col-xs-12 col-md-6" ng-class="{'has-error': (formstep2.$submitted || formstep2.companyslogan.$touched) && formstep2.companyslogan.$invalid} ">
                                            <label>Company Slogan</label><br />
                                                <input type="text" value="" id="" class="form-control bordercontrol-colorprimary sqrely-placeholder1" name="companyslogan" placeholder="Slogan" ng-model="config.tenantconfigs[1].parameter" required onfocus="this.placeholder = ''" onblur="this.placeholder = 'Slogan'" style="display:inline-block;width:95%" />
                                                <div class="font-icon-detail validacioninput">
                                                <span>*</span>
                                            </div>
                                        </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-lg-6 col-md-6" ng-class="{'has-error': (formstep2.$submitted || formstep2.companyemail.$touched) && formstep2.companyemail.$invalid} ">
                                            <label>Company Email</label><br />
                                                <input type="email" value="" id="" class="form-control bordercontrol-colorprimary sqrely-placeholder1" name="companyemail" ng-model="config.tenantconfigs[5].parameter" placeholder="example@domain.com" required onfocus="this.placeholder = ''" onblur="    this.placeholder = 'example@domain.com'" style="display:inline-block;width:95%" />
                                                <div class="font-icon-detail validacioninput">
                                                    <span>*</span>
                                                </div>
                                                <div>
                                                    <div ng-show="formstep2.companyemail.$error.email">
                                                <span style="color: #a12b2b">Invalid email</span>
                                            </div>
                                            </div>
                                        </div>

                                            <div class="form-group col-lg-6 col-md-6" ng-class="{'has-error': (formstep2.$submitted || formstep2.companyphone.$touched) && formstep2.companyphone.$invalid} ">
                                            <label>Company Phone</label><br />
                                                <input type="text" value="" id="" class="form-control bordercontrol-colorprimary sqrely-placeholder1" name="companyphone" ng-model="config.tenantconfigs[6].parameter" placeholder="(999) 999-9999" required mask="(999) 999-9999" clean="true" ng-pattern="/^\(\d{3}\)\s\d{3}-\d{4}/" onfocus="this.placeholder = ''" onblur="    this.placeholder = '(999) 999-9999'" style="display:inline-block;width:95%" />
                                                <div class="font-icon-detail validacioninput">
                                                <span>*</span>
                                            </div>
                                        </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-lg-6 col-xs-12 col-md-6" ng-class="{'has-error': (formstep2.$submitted || formstep2.caompanyfax.$touched) && formstep2.caompanyfax.$invalid} ">
                                            <label>Company Fax</label><br />
                                                <input type="text" value="" id="" class="form-control bordercontrol-colorprimary sqrely-placeholder1" name="caompanyfax" ng-model="config.tenantconfigs[7].parameter" placeholder="(999) 999-9999" required mask="(999) 999-9999" clean="true" ng-pattern="/^\(\d{3}\)\s\d{3}-\d{4}/" onfocus="this.placeholder = ''" onblur="    this.placeholder = '(999) 999-9999'" style="display:inline-block;width:95%" />
                                                <div class="font-icon-detail validacioninput">
                                                <span>*</span>
                                            </div>
                                        </div>

                                            <div class="form-group col-lg-6 col-md-6" ng-class="{'has-error': (formstep2.$submitted || formstep2.website.$touched) && formstep2.website.$invalid} ">
                                            <label>Web Site</label><br />
                                                <input type="text" value="" id="" class="form-control bordercontrol-colorprimary sqrely-placeholder1" name="website" ng-model="config.tenantconfigs[8].parameter" placeholder="www.example.com" required onfocus="this.placeholder = ''" onblur="    this.placeholder = 'www.example.com'" style="display:inline-block;width:95%" />
                                                <div class="font-icon-detail validacioninput">
                                                <span>*</span>
                                            </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-lg-6 col-md-6" ng-class="{'has-error': (formstep2.$submitted || formstep2.campanyaddress.$touched) && formstep2.campanyaddress.$invalid} ">
                                            <label>Company Address</label><br />
                                                <input type="text" value="" id="" class="form-control bordercontrol-colorprimary sqrely-placeholder1" name="campanyaddress" placeholder="Address Information" ng-model="config.tenantconfigs[3].parameter" required onfocus="this.placeholder = ''" onblur="    this.placeholder = 'Address Information'" style="display:inline-block;width:95%" />
                                                <div class="font-icon-detail validacioninput">
                                                <span>*</span>
                                            </div>
                                            <div class="checkbox text-left m-t-xs">
                                                <input icheck type="checkbox" ng-model="samebilladd" ng-change="SameAdd()">
                                                <span style="color:#6a6c6f">Is the same Billing Address</span>
                                            </div>
                                        </div>
                                            <div class="form-group col-lg-6 col-xs-12 col-md-6" ng-class="{'has-error': (formstep2.$submitted || formstep2.baddress.$touched) && formstep2.baddress.$invalid} ">
                                                <label>Billing Address</label><br />
                                                <input type="text" value="" id="" class="form-control bordercontrol-colorprimary sqrely-placeholder1" name="baddress" ng-model="config.tenantconfigs[4].parameter" placeholder="Address Information" required onfocus="this.placeholder = ''" onblur="    this.placeholder = 'Address Information'" style="display:inline-block;width:95%" />
                                                <div class="font-icon-detail validacioninput">
                                                    <span>*</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                    </div>
                                </div>
                                <div class="text-right col-lg-12">
                                    <button ng-click="wizard.prev()" ng-disabled="" class="btn btn-sqrely-primary" style="font-size:14px">Previous</button>
                                    <button ng-click="wizard.next()" ng-disabled="!formstep2.$valid" ng-hide="" class="btn btn-sqrely-primary" style="font-size:14px">Next</button>
                                </div>
                            </div>
                            <div class="form-group col-lg-12 col-md-12 col-xs-12" style="font-size:14px; color:#e74c3c;font-weight:500">
                                <label>(*) Required Fields</label>
                            </div>
                            @*<img ng-src="{{selectedImage}}" src="~/Content/img/sqrelyLog.png" class="img-responsive" />*@
                        </form>
                    </div>
                    <div ng-show="step == 3" class="p-m" style="border-top: 1px solid #e4e5e7;border-bottom: 1px solid #e4e5e7;">
                        <form name="formstep3" novalidate id="simpleForm3">
                            <div class="row">
                                <div class="form-group col-lg-6" ng-class="{'has-error': (formstep3.regiontxt.$touched || formstep3.regiontxt.$error.pattern) && formstep3.regiontxt.$invalid} ">
                                    <label>Region</label><br />
                                    <select name="regiontxt" id="regiontxt" ng-model="SelectedRegion" class="form-control bordercontrol-colorprimary" required ng-options="rg.name for rg in allregion" style="display:inline-block;" ng-change="AsigRegion()"></select>
                                    <div class="font-icon-detail validacioninput">
                                        <span>*</span>
                                    </div>
                                </div>
                                <div class="form-group col-lg-6" ng-class="{'has-error': (formstep3.timez.$touched || formstep3.timez.$error.pattern) && formstep3.timez.$invalid} ">
                                    <label>Time Zone</label><br />
                                    <select name="timez" id="timez" ng-model="SelectedTimezone" class="form-control bordercontrol-colorprimary" required ng-options="tz.timeZone for tz in allTimezone" style="display:inline-block;" ng-change="AsigTimezone()"></select>
                                    <div class="font-icon-detail validacioninput">
                                        <span>*</span>
                                    </div>
                                </div>
                                <div class="form-group col-lg-6" ng-class="{'has-error': (formstep3.currencytxt.$touched || formstep3.currencytxt.$error.pattern) && formstep3.currencytxt.$invalid} ">
                                    <label>Currency</label><br />
                                    <select name="currencytxt" id="currencytxt" ng-model="SelectedCurency" class="form-control bordercontrol-colorprimary" required ng-options="currency.name for currency in allcurrency" style="display:inline-block;" ng-change="AsigCurrency()"></select>
                                    <div class="font-icon-detail validacioninput">
                                        <span>*</span>
                            </div>
                                </div>
                                <div class="form-group col-lg-6" ng-class="{'has-error': (formstep3.langtxt.$touched || formstep3.langtxt.$error.pattern) && formstep3.langtxt.$invalid} ">
                                    <label>Language</label><br />
                                    <select name="langtxt" id="langtxt" ng-model="SelectedLanguage" class="form-control bordercontrol-colorprimary" required ng-options="lag.name for lag in allLanguage" style="display:inline-block;" ng-change="AsigLanguage()"></select>
                                    <div class="font-icon-detail validacioninput">
                                        <span>*</span>
                                    </div>
                                </div>
                            </div>
                            <div class="text-right m-t-xs">
                                <button ng-click="wizard.prev()" class="btn btn-sqrely-primary" style="font-size:14px">Previous</button>
                                <button ng-click="wizard.next()" class="btn btn-sqrely-primary"ng-disabled="!formstep3.$valid" style="font-size:14px">Next</button>
                            </div>
                            <div class="form-group col-lg-12 col-md-12 col-xs-12" style="font-size:14px; color:#e74c3c;font-weight:500">
                                <label>(*) Required Fields</label>
                            </div>
                        </form>
                    </div>
                    <div ng-show="step == 4" class="" style="border-top: 1px solid #e4e5e7; border-bottom: 1px solid #e4e5e7">
                        <form name="formstep4" novalidate id="simpleForm2">
                            <div class="row">
                                <div class="col-lg-3 text-center">
                                    <p class="small m-t-md">
                                        <h1>{{allowusers}}</h1>
                                        <strong>Current Users</strong>
                                    </p>
                                    
                                </div>
                                <div class="col-lg-9" style="border-left: 1px solid rgb(216, 216, 216);">
                                    <div class="row-fluid" >
                                        <div class="row">
                                            <div class="form-group col-lg-6" ng-class="{'has-error': formstep4.uname.$touched && formstep4.uname.$invalid} ">
                                            <label>First Name</label><br />
                                                <input type="text" value="" id="" class="form-control bordercontrol-colorprimary sqrely-placeholder1" ng-model="username" name="uname" required maxlength="512" placeholder="Name" onfocus="this.placeholder = ''" onblur="    this.placeholder = 'First Name'" style="display:inline-block" />
                                                <div class="font-icon-detail validacioninput">
                                                <span>*</span>
                                            </div>
                                            </div>
                                            <div class="form-group col-lg-6" ng-class="{'has-error': formstep4.uname.$touched && formstep4.uname.$invalid} ">
                                                <label>Last Name</label><br />
                                                <input type="text" value="" id="" class="form-control bordercontrol-colorprimary sqrely-placeholder1" ng-model="userlastname" name="ulname" required maxlength="512" placeholder="Name" onfocus="this.placeholder = ''" onblur="    this.placeholder = 'Last Name'" style="display:inline-block" />
                                                <div class="font-icon-detail validacioninput">
                                                    <span>*</span>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-lg-6" ng-class="{'has-error':  formstep4.uid.$touched && formstep4.uid.$invalid} ">
                                                <label>User Name</label><br />
                                                <input type="text" value="" id="" class="form-control bordercontrol-colorprimary sqrely-placeholder1" name="uid" ng-model="alias" ng-model-options="{debounce: 1000}" ng-change="ifuserexist()" required pattern=".{6,20}" placeholder="User Name" onfocus="this.placeholder = ''" onblur="    this.placeholder = 'User Name'" style="display:inline-block" />
                                                <div class="font-icon-detail validacioninput">
                                                    <span>*</span>
                                                </div>
                                                <div>
                                                    <div class="font-icon-detail" ng-show="formstep4.uid.$error.pattern">
                                                        <span style="color: #e74c3c">Username minimum 6 and 20 maximum character</span>
                                                    </div>
                                                    <div class="font-icon-detail" ng-show="!formstep4.uid.$error.pattern && userexist">
                                                        <span style="color: #e74c3c">User name already Exist</span>
                                                    </div>
                                                </div>
                                            </div>
                                           
                                            <div class="form-group col-lg-6" ng-class="{'has-error': (formstep4.passwd.$touched || formstep4.passwd.$error.pattern) && formstep4.passwd.$invalid} ">
                                                <label>Password</label><br />
                                                <input type="text" class="form-control bordercontrol-colorprimary sqrely-placeholder1" name="passwd" ng-model="password" required ng-pattern="/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,12}$/" placeholder="password" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Password'" style="display:inline-block" />
                                                <div class="font-icon-detail validacioninput">
                                                <span>*</span>
                                            </div>
                                                <div>
                                                    <div class="font-icon-detail" ng-show="formstep4.passwd.$error.pattern">
                                                        <span style="color: #e74c3c">Error password, you need a format that contains capital letters and numbers, example: Michael7.</span>
                                                    </div>
                                                </div>
                                        </div>
                                            </div>
                                        <div class="row">
                                            <div class="form-group col-lg-6" ng-class="{'has-error':  formstep4.uemail.$touched && formstep4.uemail.$invalid} ">
                                                <label>Email</label><br />
                                                <input type="email" value="" id="" ng-change="Ifemailexist()" class="form-control bordercontrol-colorprimary sqrely-placeholder1" name="uemail" ng-model="email" ng-model-options="{debounce: 1000}" required placeholder="example@domain.com" onfocus="    this.placeholder = ''" onblur="    this.placeholder = 'example@domain.com'" style="display:inline-block" />
                                                <div class="font-icon-detail validacioninput">
                                                    <span>*</span>
                                                </div>
                                                <div>
                                                    <div class="font-icon-detail" ng-show="formstep4.uemail.$error.email">
                                                        <span style="color: #e74c3c">Invalid email</span>
                                                    </div>
                                                    <div class="font-icon-detail" ng-show="!formstep4.uemail.$error.email && emailexist">
                                                        <span style="color: #e74c3c">email already exists</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group col-lg-6" ng-class="{'has-error': (formstep4.urol.$touched || formstep4.urol.$error.pattern) && formstep4.urol.$invalid} ">
                                                <label>Rol</label><br />
                                                <select name="urol" id="urol" ng-model="selectedRol" class="form-control bordercontrol-colorprimary" required ng-options="rl.name for rl in allroles" style="display:inline-block;" ></select>
                                                <div class="font-icon-detail validacioninput">
                                                <span>*</span>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                    <div class="text-right m-t-xs">
                                        @*<button ng-click="Adduser()" class="btn btn-sqrely-primary" ng-disabled="!formstep4.$valid || userexist" style="font-size:10px">Add User</button>
                                        <button ng-click="Updateuser(userindex)" class="btn btn-sqrely-primary" ng-disabled="!isupdatevalid" style="font-size:10px">Update</button>*@
                                        <button ng-click="Adduser()" class="btn btn-sqrely-primary" ng-disabled="!formstep4.$valid || userexist || emailexist" style="font-size:14px"><i class="fa fa-plus"></i> Add</button>
                                        <button ng-click="Updateuser(userindex)" class="btn btn-sqrely-primary" ng-disabled="!isupdatevalid" style="font-size:14px"><i class="fa fa-save"></i> Save</button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="table-responsive">
                                @*<div class="form-group left">
                                    <label>filter: </label>
                                    <input type="text" value="" id="fiter" class="form-control bordercontrol-colorprimary sqrely-placeholder1" name="filter" onfocus="this.placeholder = ''" onblur="    this.placeholder = 'Find user'" style="max-width: 350px"/>
                                </div>*@<br /><br />
                                <table cellpadding="1" cellspacing="1" class="table table-bordered table-striped">
                                    <thead>
                                        <tr>
                                            <th>First Name</th>
                                            <th>last Name</th>
                                            <th>Username</th>
                                            <th>Password</th>
                                            <th>Email</th>
                                            <th>Rol</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="us in config.usuarios">
                                            <td>{{us.username}}</td>
                                            <td>{{us.userlastname}}</td>
                                            <td>{{us.alias}}</td>
                                            <td>{{"**********"}}</td>
                                            <td>{{us.email}}</td>
                                            <td>{{us.rol.name}}</td>
                                            <td><a ng-click="remove($index)" ng-disabled="isupdatevalid" class="btn btn-default"><i class="fa fa-trash-o"></i></a>
                                                <a ng-click="edit($index)" class="btn btn-default"><i class="fa fa-edit"></i></a></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            @*<tt>formstep2.uid.$valid = {{formstep2.uid.$valid}}</tt><br />
                            <tt>formstep2.uid.$invalid = {{formstep2.uid.$invalid}}</tt><br />
                            <tt>formstep2.uid.$touched = {{formstep2.uid.$touched}}</tt><br />
                            <tt>formstep2.$submitted = {{formstep2.$submitted}}</tt><br />
                            <tt>formstep2.uid.$error = {{formstep2.uid.$error}}</tt><br />
                            <tt>formstep2.uid.$error.email = {{formstep2.uid.$error.email}}</tt><br />
                            <tt>formstep2.$valid = {{formstep2.$valid}}</tt><br />*@
                            <div class="text-right m-t-xs">
                                <button ng-click="wizard.prev()" ng-disabled="step == 1" class="btn btn-sqrely-primary" style="font-size:14px">Previous</button>
                                <button ng-click="wizard.next()" ng-disabled="" ng-hide="step == 5" class="btn btn-sqrely-primary" style="font-size:14px">Next</button>
                                @*<button ng-click="wizard.next()" ng-hide="config.usuarios != null" ng-show="config.usuarios == null" class="btn btn-default">Skip</button>*@
                            </div>
                            <div class="form-group col-lg-12 col-md-12 col-xs-12" style="font-size:14px; color:#e74c3c;font-weight:500">
                                <label>(*) Required Fields</label>
                            </div>
                        </form>
                    </div>
                    <div ng-show="step == 5" style="border-top: 1px solid #D2CACA; border-bottom: 1px solid #e4e5e7">
                        <div class="row text-center m-t-lg m-b-lg">
                            <div class="col-lg-12">
                                <i class="pe-7s-check fa-5x text-muted" style="color:#1abdc8"></i>
                                <p class="small m-t-md">
                                    <strong> Your setup is now complete, you are all set and ready to go. We look forward to many sales orders!</strong>
                                </p>
                            </div>
                        </div>
                        <div class="text-right m-t-xs">
                            <button ng-click="wizard.prev()" ng-disabled="step == 1" class="btn btn-sqrely-primary" style="font-size:14px">Previous</button>
                            <button ng-click="submit()" ng-show="step == 5" class="btn btn-sqrely-primary" style="font-size:14px">Submit</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

